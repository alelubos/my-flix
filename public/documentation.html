<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>myFlix API</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" type="text/css" href="css/styles.css" />
  </head>
  <body>
    <h1>myFlix -API documentation-</h1>
    
    <table>
      <thead>
        <tr>
          <th>Request</th>
          <th>request body</th>
          <th>HTTP method</th>
          <th>URL Endpoint</th>
          <th>Response</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Get list of movies</td>
          <td>none</td>
          <td>GET</td>
          <td>/movies</td>
          <td>JSON with data about all movies</td>
        </tr>

        <tr>
          <td>Get data about single movie by movieID</td>
          <td>none</td>
          <td>GET</td>
          <td>/movies/[movieID]</td>
          <td>
            JSON object with data about movie: 
            { "genre": { "name": "drama", "description": "..."},
            "director": { "name": "director's name",
            "bio": "director's bio",
            "birthYear": "1978",
            "deathYear": ""}, 
            "_id": "63834", "title": "Apocalypto", "description": "thriller, will have you at the edge of your seat.", 
            "imageURL": "some-url-image.png", "rating": 7.5, "featured": false, "releaseYear": "2006")
          </td>
        </tr>

        <tr>
          <td>Get data about single genre by name</td>
          <td>none</td>
          <td>GET</td>
          <td>/genres/[name]</td>
          <td>JSON object with description about genre: 
            { "name": "genre name", "description": "text describing genre"}
          </td>
        </tr>

        <tr>
          <td>Get data about a director by name</td>
          <td>none</td>
          <td>GET</td>
          <td>/directors/[name]</td>
          <td>
            JSON object with data about a director: 
            { "name": "director's name",
              "bio": "director's bio",
              "birthYear": "1978",
              "deathYear": "" }
          </td>
        </tr>

        <tr>
          <td>Register a new user</td>
          <td>JSON object: { "username": "user123", "password: "123abc", "email": "u123@domain.com" [, "birthday": "YYYY-MM-DD"] }</td>
          <td>POST</td>
          <td>/users</td>
          <td>Text confirming registration</td>
        </tr>

        <tr>
          <td>Login an already registered user</td>
          <td>See auth.js for details</td>
          <td>POST</td>
          <td>/login</td>
          <td>User JSON object with JWT Token.</td>
        </tr>

        
        <tr>
          <td>Add movie to user's list of favorites movies</td>
          <td>none</td>
          <td>POST</td>
          <td>/users/[username]/favorites/[movieID]</td>
          <td>
            JSON object with username and updated favoriteMovies: { 
              "_id": "users-id-code",
              "username": "user1234", 
              "favoriteMovies": [ "movieID1", ..."movieIDN", "added-movieID" ]
            }  
          </td>

          <tr>
            <td>Update information of single user by username</td>
            <td>JSON object updated: { "username": "new_name", "password: "new_123", "email": "new_email@domain.com", "birthday": "2000-03-16" }</td>
            <td>PUT</td>
            <td>/users/[username]</td>
            <td>JSON object with updated user data: 
              {
                "_id": "56473",
                "username": "new_name",
                "password": "new_123",
                "email": "new_email@domain.com",
                "birthday": "2000-03-16",
                "favoriteMovies": [],
                "__v": 0
            }
            </td>
          </tr>
        
          <tr>
            <td>Delete movie from user's list of favorites</td>
            <td>none</td>
            <td>DELETE</td>
            <td>/users/[username]/favorites/[movieID]</td>
            <td>JSON object with username and updated favoriteMovies (passed movieID removed from the list): { 
              "_id": "users-id-code",
              "username": "user1234", 
              "favoriteMovies": [ "movieId1", ..."movieIdN" ]
            } </td>
          </tr>

          <tr>
            <td>De-register (delete) user by username</td>
            <td>none</td>
            <td>DELETE</td>
            <td>/users/[username]</td>
            <td>Text message confirming user was removed</td>
          </tr>
        </tr>
      </tbody>
    </table>
  </body>
</html>
